<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Quiz Direitos Humanos</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comic+Neue:wght@700&display=swap');

  /* Fundo colorido estilo desenho */
  body {
  margin: 0; padding: 0;
  min-height: 100vh;
  font-family: 'Comic Neue', cursive, Arial, sans-serif;
  background: #a0d8f7;
  background-image: url('https://img.freepik.com/free-vector/hand-painted-watercolor-pastel-sky-background_23-2148902771.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  display: flex;
  justify-content: center;
  align-items: center;
  user-select: none;
}

  #app {
    background: #fff;
    width: 90vw;
    max-width: 720px;
    border-radius: 25px;
    box-shadow:
      0 12px 25px rgba(0, 0, 0, 0.2),
      inset 0 0 50px #6a5acd22;
    padding: 30px 35px 40px;
    text-align: center;
    position: relative;
    display: flex;
    flex-direction: column;
    min-height: 600px;
  }

  h1 {
    font-size: 3.2rem;
    color: #6a5acd;
    margin-bottom: 12px;
    text-shadow: 0 0 10px #9e8affaa;
    animation: pulseTitle 2s infinite alternate;
  }
  
  @keyframes pulseTitle {
    0% { transform: scale(1); }
    100% { transform: scale(1.05); }
  }
  
  p.description {
    font-size: 1.4rem;
    margin-bottom: 30px;
    color: #444;
    line-height: 1.5;
  }

  button {
    background: #6a5acd;
    color: white;
    border: none;
    border-radius: 16px;
    padding: 16px 36px;
    font-size: 1.3rem;
    font-weight: 700;
    cursor: pointer;
    box-shadow: 0 6px 15px #6a5acdaa;
    transition:
      background-color 0.3s ease,
      box-shadow 0.3s ease,
      transform 0.15s ease;
    user-select: none;
    margin: 10px 8px;
  }
  button:hover:not(:disabled) {
    background: #5649bb;
    box-shadow: 0 8px 25px #5649bbcc;
    transform: scale(1.1);
  }
  button:disabled {
    background: #bbb;
    box-shadow: none;
    cursor: default;
    transform: none;
  }

  /* Screens */
  section {
    display: none;
    flex-direction: column;
    align-items: center;
  }
  section.active {
    display: flex;
  }

  #level-notice {
    font-size: 2rem;
    color: #8b5ac6;
    text-shadow: 0 0 20px #d4b3ffcc;
    margin-bottom: 25px;
    font-weight: 900;
    animation: pulseLevel 1.4s infinite alternate ease-in-out;
  }
  @keyframes pulseLevel {
    0% { text-shadow: 0 0 20px #d4b3ffcc; color: #8b5ac6;}
    100% { text-shadow: 0 0 40px #b18affff; color: #6a5acd;}
  }

  /* Quiz */
  #question-text {
    font-size: 1.9rem;
    font-weight: 700;
    color: #4a3a7e;
    min-height: 90px;
    margin-bottom: 20px;
    animation: fadeIn 0.5s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  #answers-container {
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 15px;
    margin-bottom: 20px;
  }
  .answer-btn {
    background: #957bbe;
    color: #f4e1ff;
    flex: 1 1 40%;
    max-width: 48%;
    padding: 14px 22px;
    border-radius: 14px;
    font-weight: 700;
    font-size: 1.2rem;
    box-shadow: 0 4px 14px #957bbebb;
    user-select: none;
    transition: all 0.3s ease;
    animation: popIn 0.3s ease;
  }
  
  @keyframes popIn {
    0% { transform: scale(0.8); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
  }
  
  .answer-btn:hover:not(:disabled) {
    background: #7d5db2;
    box-shadow: 0 7px 20px #7d5db2cc;
    transform: scale(1.05);
  }
  .answer-btn.correct {
    background: #27ae60 !important;
    box-shadow: 0 0 20px #2ecc7133;
    color: #fff !important;
    animation: correctAnswer 0.5s ease;
  }
  
  @keyframes correctAnswer {
    0% { transform: scale(1); }
    50% { transform: scale(1.1); }
    100% { transform: scale(1); }
  }
  
  .answer-btn.wrong {
    background: #e74c3c !important;
    box-shadow: 0 0 20px #e74c3cbb;
    color: #fff !important;
    animation: wrongAnswer 0.5s ease;
  }
  
  @keyframes wrongAnswer {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-5px); }
    40%, 80% { transform: translateX(5px); }
  }

  #feedback-text {
    font-size: 1.4rem;
    font-weight: 700;
    min-height: 45px;
    margin-bottom: 10px;
    color: #444;
    user-select: none;
    text-shadow: 1px 1px 2px #fff;
    animation: fadeIn 0.5s ease;
  }

  #scoreboard {
    font-size: 1.3rem;
    font-weight: 800;
    color: #4a3a7e;
    margin-top: auto;
    display: flex;
    justify-content: space-between;
    width: 100%;
  }

  #controls {
    margin-top: 22px;
  }

  #controls button {
    min-width: 150px;
  }

  /* Resultado final */
  #result-screen h1 {
    font-size: 3rem;
    color: #6a5acd;
    margin-bottom: 15px;
  }
  #final-score {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 30px;
    color: #4a3a7e;
  }
  
  #high-score {
    font-size: 1.8rem;
    color: #27ae60;
    font-weight: 900;
    margin-bottom: 20px;
    text-shadow: 0 0 10px #2ecc7055;
  }

  /* Timer */
  #timer-container {
    position: absolute;
    top: 20px;
    right: 20px;
    background: #6a5acd;
    color: white;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 1.8rem;
    font-weight: bold;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    animation: pulseTimer 1s infinite alternate;
  }
  
  @keyframes pulseTimer {
    0% { transform: scale(1); }
    100% { transform: scale(1.1); }
  }
  
  #timer-container.warning {
    background: #e74c3c;
    animation: pulseWarning 0.5s infinite alternate;
  }
  
  @keyframes pulseWarning {
    0% { transform: scale(1); }
    100% { transform: scale(1.2); }
  }

  /* Mensagem de tempo esgotado */
  #timeout-message {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.8);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 100;
    animation: fadeIn 0.3s ease;
  }
  
  #timeout-message-content {
    background: white;
    padding: 30px;
    border-radius: 20px;
    max-width: 80%;
    text-align: center;
    animation: popIn 0.5s ease;
  }
  
  #timeout-message h2 {
    color: #e74c3c;
    font-size: 2.5rem;
    margin-bottom: 20px;
  }
  
  #timeout-message p {
    font-size: 1.5rem;
    margin-bottom: 30px;
  }

  /* Responsivo */
  @media(max-width: 600px) {
    .answer-btn {
      max-width: 100%;
      flex: 1 1 100%;
    }
    h1 {
      font-size: 2.4rem;
    }
    #question-text {
      font-size: 1.6rem;
      min-height: 75px;
    }
    #timer-container {
      width: 50px;
      height: 50px;
      font-size: 1.5rem;
      top: 15px;
      right: 15px;
    }
  }
</style>
</head>
<body>
  <div id="app" role="main" aria-label="Quiz de Direitos Humanos para crian√ßas">
    <!-- Timer -->
    <div id="timer-container" style="display: none;">10</div>
    
    <!-- Mensagem de tempo esgotado -->
    <div id="timeout-message">
      <div id="timeout-message-content">
        <h2>Tempo Esgotado! ‚è±Ô∏è</h2>
        <p>Voc√™ demorou muito para responder e o jogo foi reiniciado. Tente novamente mais r√°pido!</p>
        <button id="timeout-ok-btn">OK, entendi!</button>
      </div>
    </div>
    
    <!-- Tela Inicial -->
    <section id="start-screen" class="active" aria-live="polite">
      <h1>Quiz Divertido<br>de Direitos Humanos</h1>
      <p class="description">
        Vamos aprender sobre direitos humanos de forma f√°cil e divertida!<br>
        S√£o 3 n√≠veis: F√°cil, M√©dio e Dif√≠cil.<br>
        Voc√™ tem 10 segundos para cada pergunta!<br>
        Pronto para come√ßar essa aventura?
      </p>
      <button id="start-btn" aria-label="Iniciar quiz de direitos humanos">Iniciar Quiz</button>
    </section>

    <!-- Aviso do N√≠vel -->
    <section id="level-notice" role="alert" aria-live="assertive" aria-atomic="true" style="display:none;">
      <span id="level-name">N√≠vel</span>
      <button id="continue-level-btn" aria-label="Continuar para as perguntas do n√≠vel">Continuar</button>
    </section>

    <!-- Quiz -->
    <section id="quiz-screen" aria-live="polite" aria-atomic="true" style="display:none;">
      <div id="scoreboard" aria-label="Placar de pontos">
        <span>Pontos: <span id="current-score">0</span></span>
        <span>Recorde: <span id="high-score-display">0</span></span>
      </div>
      <div id="question-text" tabindex="0"></div>
      <div id="answers-container" role="list"></div>
      <div id="feedback-text" aria-live="polite"></div>
      <div id="controls">
        <button id="next-btn" disabled aria-label="Pr√≥xima pergunta">Pr√≥xima</button>
        <button id="restart-btn" aria-label="Reiniciar quiz" style="display:none;">Reiniciar</button>
      </div>
    </section>

    <!-- Tela Resultado Final -->
    <section id="result-screen" aria-live="polite" style="display:none;">
      <h1>Parab√©ns! üéâ</h1>
      <div id="final-score"></div>
      <div id="high-score"></div>
      <button id="play-again-btn" aria-label="Jogar novamente">Jogar Novamente</button>
    </section>

    <footer>
      <p>¬© 2025 Nelson Pedroso Norbach</p>
    </footer>
  </div>

<script>
  // Perguntas divididas por n√≠veis
  const niveis = {
    facil: [
      {
        pergunta: "O que s√£o os direitos humanos?",
        opcoes: [
          "Regras para brincar",
          "Direitos b√°sicos de todas as pessoas",
          "Apenas para adultos",
          "Um jogo"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual destes √© um direito humano?",
        opcoes: [
          "Ter um celular novo",
          "Ter moradia digna",
          "Ter brinquedos caros",
          "N√£o ir √† escola"
        ],
        resposta: 1
      },
      {
        pergunta: "Quem deve respeitar os direitos humanos?",
        opcoes: [
          "S√≥ os professores",
          "Todas as pessoas",
          "S√≥ os pais",
          "S√≥ os adultos"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que respeitar as diferen√ßas √© importante?",
        opcoes: [
          "Porque √© obrigat√≥rio",
          "Para vivermos em harmonia",
          "Porque √© chato",
          "Para ganhar pr√™mios"
        ],
        resposta: 1
      },
      {
        pergunta: "O que podemos fazer para ajudar os outros?",
        opcoes: [
          "Ignorar",
          "Ser solid√°rio e compreensivo",
          "Brigar",
          "Ficar sozinho"
        ],
        resposta: 1
      },
      {
        pergunta: "Todas as crian√ßas t√™m direito a:",
        opcoes: [
          "Ganhar presentes sempre",
          "Educa√ß√£o gratuita",
          "Ficar sem brincar",
          "Decidir tudo sozinhas"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© bullying?",
        opcoes: [
          "Brincar junto",
          "Agredir f√≠sica ou verbalmente algu√©m",
          "Ajudar um amigo",
          "Fazer brincadeiras sem maldade"
        ],
        resposta: 1
      },
      {
        pergunta: "Se algu√©m est√° triste, o que devemos fazer?",
        opcoes: [
          "Rir da pessoa",
          "Oferecer apoio",
          "Fazer piadas",
          "Falar para se afastar"
        ],
        resposta: 1
      },
      {
        pergunta: "Onde podemos aprender sobre direitos humanos?",
        opcoes: [
          "Na escola e em casa",
          "S√≥ na internet",
          "S√≥ com os amigos",
          "N√£o precisamos aprender"
        ],
        resposta: 0
      },
      {
        pergunta: "O que devemos fazer quando algu√©m precisa de ajuda?",
        opcoes: [
          "Virar as costas",
          "Oferecer ajuda respeitosa",
          "Fingir que n√£o viu",
          "Chamar aten√ß√£o da pessoa"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual destes √© um direito da crian√ßa?",
        opcoes: [
          "Trabalhar desde cedo",
          "Brincar e se divertir",
          "Ficar sem estudar",
          "Fazer tudo o que quiser"
        ],
        resposta: 1
      },
      {
        pergunta: "Como devemos tratar pessoas com defici√™ncia?",
        opcoes: [
          "Com pena",
          "Com respeito e igualdade",
          "Ignorando suas dificuldades",
          "Fazendo tudo por elas"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© preconceito?",
        opcoes: [
          "Uma opini√£o diferente",
          "Julgar algu√©m antes de conhecer",
          "Um tipo de brincadeira",
          "Algo que n√£o existe mais"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que √© importante ir √† escola?",
        opcoes: [
          "Porque os pais mandam",
          "√â um direito e nos ajuda a crescer",
          "Para ficar longe de casa",
          "S√≥ porque √© obrigat√≥rio"
        ],
        resposta: 1
      },
      {
        pergunta: "O que fazer se vir algu√©m sendo discriminado?",
        opcoes: [
          "Fingir que n√£o viu",
          "Defender a pessoa e avisar um adulto",
          "Tirar fotos para postar",
          "Achar engra√ßado"
        ],
        resposta: 1
      }
    ],
    medio: [
      {
        pergunta: "Por que as regras s√£o importantes?",
        opcoes: [
          "Para controlar as pessoas",
          "Para garantir direitos e deveres de todos",
          "Para os adultos mandarem",
          "Para punir crian√ßas"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual destes N√ÉO √© um direito humano?",
        opcoes: [
          "Ter opini√£o pr√≥pria",
          "Ser tratado com dignidade",
          "Humilhar os outros",
          "Ter acesso √† sa√∫de"
        ],
        resposta: 2
      },
      {
        pergunta: "O que significa igualdade?",
        opcoes: [
          "Todos serem iguais em tudo",
          "Todos terem os mesmos direitos e oportunidades",
          "S√≥ algumas pessoas terem direitos",
          "Cada um cuidar s√≥ de si"
        ],
        resposta: 1
      },
      {
        pergunta: "Como resolver conflitos pacificamente?",
        opcoes: [
          "Brigando",
          "Dialogando e ouvindo o outro",
          "Fazendo vota√ß√£o",
          "Pedindo para adultos decidirem"
        ],
        resposta: 1
      },
      {
        pergunta: "Quem criou a Declara√ß√£o dos Direitos Humanos?",
        opcoes: [
          "Os Estados Unidos sozinhos",
          "A Organiza√ß√£o das Na√ß√µes Unidas (ONU)",
          "Os presidentes do mundo",
          "Os pa√≠ses mais ricos"
        ],
        resposta: 1
      },
      {
        pergunta: "Direito √† educa√ß√£o inclui:",
        opcoes: [
          "S√≥ quem pode pagar",
          "Todas as crian√ßas, sem discrimina√ß√£o",
          "S√≥ quem tem boas notas",
          "S√≥ nas cidades grandes"
        ],
        resposta: 1
      },
      {
        pergunta: "Quando os direitos humanos come√ßam?",
        opcoes: [
          "Quando completamos 18 anos",
          "No momento em que nascemos",
          "Quando entramos na escola",
          "S√≥ para quem tem documento"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© discrimina√ß√£o?",
        opcoes: [
          "Escolher seu time favorito",
          "Tratar algu√©m pior por sua cor, g√™nero ou religi√£o",
          "N√£o gostar de um alimento",
          "Ter um amigo preferido"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que existem direitos especiais para crian√ßas?",
        opcoes: [
          "Porque s√£o mais fracas e em desenvolvimento",
          "Porque s√£o mais importantes",
          "Porque os adultos decidiram",
          "Porque n√£o sabem de nada"
        ],
        resposta: 0
      },
      {
        pergunta: "Como promover direitos humanos na escola?",
        opcoes: [
          "Brigando com quem discorda",
          "Respeitando todos e denunciando injusti√ßas",
          "Falando s√≥ com quem pensa igual",
          "Impondo minhas ideias"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© liberdade de express√£o?",
        opcoes: [
          "Falar o que quiser sem consequ√™ncias",
          "Expressar opini√µes com responsabilidade",
          "Gritar mais alto que os outros",
          "Falar mal dos professores"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual a import√¢ncia da fam√≠lia?",
        opcoes: [
          "Dar presentes sempre",
          "Oferecer prote√ß√£o e afeto",
          "Controlar todas as decis√µes",
          "S√≥ para pagar as contas"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© trabalho infantil?",
        opcoes: [
          "Ajudar em casa √†s vezes",
          "Crian√ßas trabalhando em vez de estudar",
          "Fazer tarefas escolares",
          "Arrumar o pr√≥prio quarto"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que √© errado discriminar por cor da pele?",
        opcoes: [
          "Porque pode dar multa",
          "Porque todos t√™m o mesmo valor humano",
          "Porque √© moda dizer isso",
          "Porque os professores mandam"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© cidadania?",
        opcoes: [
          "Ter carteira de identidade",
          "Exercer direitos e cumprir deveres",
          "Morar em cidade grande",
          "Ser maior de idade"
        ],
        resposta: 1
      }
    ],
    dificil: [
      {
        pergunta: "O que significa dignidade humana?",
        opcoes: [
          "Ter dinheiro",
          "Ter valor independente de condi√ß√µes",
          "Ser famoso",
          "Ter muitos bens"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual √≥rg√£o protege direitos humanos no Brasil?",
        opcoes: [
          "O Ex√©rcito",
          "O Minist√©rio P√∫blico",
          "As escolas",
          "Os hospitais"
        ],
        resposta: 1
      },
      {
        pergunta: "Quando foi criada a Declara√ß√£o dos Direitos Humanos?",
        opcoes: [
          "1948 ap√≥s a 2¬™ Guerra Mundial",
          "1500 com o descobrimento",
          "2000 no novo mil√™nio",
          "1776 com a independ√™ncia dos EUA"
        ],
        resposta: 0
      },
      {
        pergunta: "O que √© racismo estrutural?",
        opcoes: [
          "Um tipo de doen√ßa",
          "Discrimina√ß√£o enraizada na sociedade",
          "Prefer√™ncia por uma cor",
          "Algo que n√£o existe mais"
        ],
        resposta: 1
      },
      {
        pergunta: "Direitos humanos s√£o:",
        opcoes: [
          "S√≥ para quem se comporta",
          "Universais, indivis√≠veis e interdependentes",
          "Privil√©gios",
          "Leis opcionais"
        ],
        resposta: 1
      },
      {
        pergunta: "O que significa defender direitos humanos?",
        opcoes: [
          "Proteger s√≥ meus amigos",
          "Garantir dignidade para todos",
          "Ser contra a pol√≠cia",
          "Apoiar criminosos"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© justi√ßa social?",
        opcoes: [
          "Dar tudo para os pobres",
          "Distribui√ß√£o justa de oportunidades",
          "Todos ganharem o mesmo",
          "O governo decidir tudo"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que a liberdade religiosa √© importante?",
        opcoes: [
          "Para converter todo mundo",
          "Respeitar diferentes cren√ßas",
          "Ter uma religi√£o oficial",
          "Obedecer aos l√≠deres religiosos"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© um direito fundamental?",
        opcoes: [
          "Um direito secund√°rio",
          "Essencial para vida digna",
          "Um privil√©gio",
          "Algo que podemos viver sem"
        ],
        resposta: 1
      },
      {
        pergunta: "Qual o papel do Estado nos direitos humanos?",
        opcoes: [
          "Criar dificuldades",
          "Garantir e proteger direitos",
          "Controlar tudo",
          "S√≥ cobrar impostos"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© viola√ß√£o de direitos humanos?",
        opcoes: [
          "Qualquer desrespeito a direitos b√°sicos",
          "S√≥ crimes muito graves",
          "Algo que s√≥ governos fazem",
          "Coisa do passado"
        ],
        resposta: 0
      },
      {
        pergunta: "O que √© democracia?",
        opcoes: [
          "Governo dos mais ricos",
          "Sistema onde todos participam",
          "Ditadura disfar√ßada",
          "S√≥ elei√ß√µes a cada 4 anos"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© acesso √† justi√ßa?",
        opcoes: [
          "S√≥ para quem pode pagar",
          "Direito de defender seus direitos",
          "Processos judiciais complicados",
          "Algo desnecess√°rio"
        ],
        resposta: 1
      },
      {
        pergunta: "Por que direitos humanos incluem sa√∫de?",
        opcoes: [
          "Porque √© um privil√©gio",
          "Porque √© essencial para vida digna",
          "S√≥ para quem trabalha",
          "Porque hospitais precisam de pacientes"
        ],
        resposta: 1
      },
      {
        pergunta: "O que √© sustentabilidade nos direitos humanos?",
        opcoes: [
          "Garantir direitos sem prejudicar futuro",
          "S√≥ cuidar da natureza",
          "Economizar dinheiro",
          "Moda ecol√≥gica"
        ],
        resposta: 0
      }
    ]
  };

  let nivelAtual = null;
  let perguntasNivelAtual = [];
  let indicePergunta = 0;
  let pontos = 0;
  let timerInterval = null;
  let currentTime = 10; // Tempo reduzido para 10 segundos
  let highScore = localStorage.getItem('quizDH_highScore') || 0;

  // Elementos
  const startScreen = document.getElementById('start-screen');
  const startBtn = document.getElementById('start-btn');
  const levelNotice = document.getElementById('level-notice');
  const levelName = document.getElementById('level-name');
  const continueLevelBtn = document.getElementById('continue-level-btn');
  const quizScreen = document.getElementById('quiz-screen');
  const questionText = document.getElementById('question-text');
  const answersContainer = document.getElementById('answers-container');
  const feedbackText = document.getElementById('feedback-text');
  const nextBtn = document.getElementById('next-btn');
  const restartBtn = document.getElementById('restart-btn');
  const currentScoreDisplay = document.getElementById('current-score');
  const highScoreDisplay = document.getElementById('high-score-display');
  const resultScreen = document.getElementById('result-screen');
  const finalScore = document.getElementById('final-score');
  const highScoreResult = document.getElementById('high-score');
  const playAgainBtn = document.getElementById('play-again-btn');
  const timerContainer = document.getElementById('timer-container');
  const timeoutMessage = document.getElementById('timeout-message');
  const timeoutOkBtn = document.getElementById('timeout-ok-btn');

  // Sons para feedback
  const somAcerto = new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');
  const somErro = new Audio('https://actions.google.com/sounds/v1/cartoon/boing.ogg');
  const somTempo = new Audio('https://actions.google.com/sounds/v1/alarms/beep_short.ogg');

  // Fun√ß√£o para embaralhar array (Fisher-Yates)
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
  }

  function mostrarTela(tela) {
    // Esconder tudo
    startScreen.style.display = 'none';
    levelNotice.style.display = 'none';
    quizScreen.style.display = 'none';
    resultScreen.style.display = 'none';
    timerContainer.style.display = 'none';
    
    // Mostrar s√≥ a tela selecionada
    tela.style.display = 'flex';
    
    // Mostrar timer apenas na tela do quiz
    if (tela === quizScreen) {
      timerContainer.style.display = 'flex';
    }
  }

  function startTimer() {
    // Resetar o tempo para 10 segundos
    currentTime = 10;
    timerContainer.textContent = currentTime;
    timerContainer.classList.remove('warning');
    
    // Limpar intervalo anterior se existir
    if (timerInterval) {
      clearInterval(timerInterval);
    }
    
    // Iniciar novo timer
    timerInterval = setInterval(() => {
      currentTime--;
      timerContainer.textContent = currentTime;
      
      // Aviso visual quando faltam 5 segundos
      if (currentTime <= 5) {
        timerContainer.classList.add('warning');
        somTempo.play();
      }
      
      if (currentTime <= 0) {
        clearInterval(timerInterval);
        mostrarMensagemTempoEsgotado();
      }
    }, 1000);
  }

  function stopTimer() {
    if (timerInterval) {
      clearInterval(timerInterval);
      timerInterval = null;
    }
    timerContainer.classList.remove('warning');
  }

  function mostrarMensagemTempoEsgotado() {
    timeoutMessage.style.display = 'flex';
  }

  function esconderMensagemTempoEsgotado() {
    timeoutMessage.style.display = 'none';
    reiniciarJogo();
  }

  function atualizarPlacar() {
    currentScoreDisplay.textContent = pontos;
    highScoreDisplay.textContent = highScore;
  }

  function verificarRecorde() {
    if (pontos > highScore) {
      highScore = pontos;
      localStorage.setItem('quizDH_highScore', highScore);
      return true;
    }
    return false;
  }

  function mostrarNivel(nivel) {
    nivelAtual = nivel;
    
    // Embaralhar as perguntas e fazer uma c√≥pia para n√£o modificar o original
    perguntasNivelAtual = shuffleArray([...niveis[nivelAtual]]);
    
    indicePergunta = 0;
    feedbackText.textContent = '';
    nextBtn.disabled = true;
    restartBtn.style.display = 'none';
    atualizarPlacar();
    levelName.textContent = `N√≠vel: ${nivelAtual[0].toUpperCase() + nivelAtual.slice(1)}`;
    mostrarTela(levelNotice);
  }

  // Mostrar pergunta atual
  function mostrarPergunta() {
    feedbackText.textContent = '';
    nextBtn.disabled = true;
    restartBtn.style.display = 'none';

    const p = perguntasNivelAtual[indicePergunta];
    questionText.textContent = p.pergunta;
    answersContainer.innerHTML = '';

    // Embaralhar as op√ß√µes de resposta
    const opcoesEmbaralhadas = [...p.opcoes];
    const respostaCorreta = p.opcoes[p.resposta];
    
    // Embaralhar mantendo controle da resposta correta
    shuffleArray(opcoesEmbaralhadas);
    
    // Atualizar o √≠ndice da resposta correta
    const novaResposta = opcoesEmbaralhadas.indexOf(respostaCorreta);

    opcoesEmbaralhadas.forEach((opcao, i) => {
      const btn = document.createElement('button');
      btn.classList.add('answer-btn');
      btn.textContent = opcao;
      btn.setAttribute('role', 'listitem');
      btn.dataset.index = i;
      btn.dataset.correct = (i === novaResposta);
      btn.style.animationDelay = `${i * 0.1}s`;
      btn.addEventListener('click', responderPergunta);
      answersContainer.appendChild(btn);
    });
    
    // Atualizar a resposta correta no objeto da pergunta
    p.resposta = novaResposta;
    
    // Iniciar o timer para esta pergunta (10 segundos)
    startTimer();
  }

  // A√ß√£o ao responder
  function responderPergunta(event) {
    stopTimer(); // Parar o timer quando responder
    
    const respostaEscolhida = parseInt(event.currentTarget.dataset.index);
    const p = perguntasNivelAtual[indicePergunta];
    const botoes = answersContainer.querySelectorAll('button');

    // Desabilitar todos os bot√µes
    botoes.forEach(btn => btn.disabled = true);

    if (respostaEscolhida === p.resposta) {
      event.currentTarget.classList.add('correct');
      feedbackText.textContent = "Voc√™ acertou! üéâ";
      pontos += 10;
      somAcerto.play();
    } else {
      event.currentTarget.classList.add('wrong');
      feedbackText.textContent = `Ops, a resposta correta era: "${p.opcoes[p.resposta]}"`;
      botoes[p.resposta].classList.add('correct');
      somErro.play();
    }

    atualizarPlacar();
    nextBtn.disabled = false;
  }

  // Pr√≥xima pergunta ou pr√≥ximo n√≠vel
  function proximaPergunta() {
    stopTimer(); // Parar o timer antes de mudar de pergunta
    
    indicePergunta++;
    if (indicePergunta >= perguntasNivelAtual.length) {
      // Mudar de n√≠vel ou finalizar
      if (nivelAtual === 'facil') {
        mostrarNivel('medio');
      } else if (nivelAtual === 'medio') {
        mostrarNivel('dificil');
      } else {
        mostrarResultadoFinal();
      }
    } else {
      mostrarPergunta();
    }
  }

  // Mostrar resultado final
  function mostrarResultadoFinal() {
    const novoRecorde = verificarRecorde();
    mostrarTela(resultScreen);
    finalScore.textContent = `Sua pontua√ß√£o total: ${pontos} pontos!`;
    
    if (novoRecorde) {
      highScoreResult.textContent = `üéâ Novo recorde! üéâ`;
      highScoreResult.style.animation = "pulseLevel 1s infinite alternate";
    } else {
      highScoreResult.textContent = `Seu recorde: ${highScore} pontos`;
    }
    
    restartBtn.style.display = 'inline-block';
    restartBtn.textContent = 'Reiniciar Quiz';
  }

  // Resetar jogo
  function reiniciarJogo() {
    stopTimer();
    pontos = 0;
    nivelAtual = null;
    indicePergunta = 0;
    perguntasNivelAtual = [];
    mostrarTela(startScreen);
    atualizarPlacar();
  }

  // Eventos
  startBtn.addEventListener('click', () => {
    pontos = 0;
    mostrarNivel('facil');
  });
  
  continueLevelBtn.addEventListener('click', () => {
    feedbackText.textContent = '';
    mostrarTela(quizScreen);
    mostrarPergunta();
  });
  
  nextBtn.addEventListener('click', () => {
    proximaPergunta();
  });
  
  restartBtn.addEventListener('click', () => {
    reiniciarJogo();
  });
  
  playAgainBtn.addEventListener('click', () => {
    reiniciarJogo();
  });
  
  timeoutOkBtn.addEventListener('click', () => {
    esconderMensagemTempoEsgotado();
  });

  // Ao carregar, mostrar tela inicial e atualizar placar
  window.onload = () => {
    mostrarTela(startScreen);
    atualizarPlacar();
  };
</script>
</body>
</html>